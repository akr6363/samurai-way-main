"use strict";(self.webpackChunksamurai_way=self.webpackChunksamurai_way||[]).push([[544],{544:function(e,a,o){o.r(a),o.d(a,{default:function(){return X}});var s=o(1413),n=o(5671),t=o(3144),i=o(136),r=o(5716),l=o(2791),c=o(672),d={dialogsPage:"Dialogs_dialogsPage__MA3aH",dialogsPage__empty:"Dialogs_dialogsPage__empty__Nt0u-",page__dialogs:"Dialogs_page__dialogs__5rJJz",page__messages:"Dialogs_page__messages__QojjJ",messagesContainer:"Dialogs_messagesContainer__aEmF6",dialogsPage__info:"Dialogs_dialogsPage__info__Toyfv",toProfileBtn:"Dialogs_toProfileBtn__NL4RZ"},u={message:"Message_message__vhqPg",message__my:"Message_message__my__bAN70",photo:"Message_photo__p-3On",photo__my:"Message_photo__my__UfDr2",photo__friend:"Message_photo__friend__DSx5U",text:"Message_text__VbalH",name:"Message_name__rX27U"},m=o(184),g=function(e){e.id;var a=e.message,o=e.isMy,s=e.user,n=e.myPhoto,t=e.myName;return(0,m.jsxs)("div",{className:"".concat(u.message," \n        ").concat(o?u.message__my:u.message__friend),children:[(0,m.jsx)("div",{className:"".concat(u.photo,"\n                 ").concat(o?u.photo__my:u.photo__friend),children:(0,m.jsx)("img",{src:o?n:null===s||void 0===s?void 0:s.photo,alt:""})}),(0,m.jsxs)("div",{className:u.text,children:[(0,m.jsx)("div",{className:"".concat(u.name,"\n                 ").concat(o?u.name__my:u.name__friend),children:o?t:null===s||void 0===s?void 0:s.name}),(0,m.jsx)("div",{children:a})]})]})},_=o(6139),p=o(704),h={messageForm:"SendMessageForm_messageForm__2fh7M",postButton:"SendMessageForm_postButton__FwDxh",postButton__icon:"SendMessageForm_postButton__icon__XO8T1",send__btn:"SendMessageForm_send__btn__BoVq4"},v=o(3079),f=o(3524),x=o(3400),j=o(1686),y=((0,v.DT)(100),(0,p.Z)({form:"send-message"})((function(e){var a=e.handleSubmit;return(0,m.jsxs)("form",{onSubmit:a,className:h.messageForm,children:[(0,m.jsx)(_.Z,{label:"Write a message...",name:"message",component:f.kc,className:h.send__input}),(0,m.jsx)(x.Z,{"aria-label":"send",size:"large",type:"submit",className:h.postButton,children:(0,m.jsx)(j.Z,{fontSize:"inherit",className:h.postButton__icon})})]})}))),Z=o(2381),N=o(364),b="NavDialogsItem_friendContainer__9J5J0",D="NavDialogsItem_photo__jjbvK",M="NavDialogsItem_name__AAqFp",P=function(e){return(0,m.jsxs)("div",{className:b,children:[(0,m.jsx)("div",{className:D,children:(0,m.jsx)("img",{src:e.photo,alt:""})}),(0,m.jsx)("div",{className:M,children:e.name})]})},z="NavDialogs_friendNavBar__W2koi",S="NavDialogs_friendNavBar__title__zZ8Un",k="NavDialogs_nav__friends__WxyTt",C="NavDialogs_friendLInk__7EP0b",R=o(1523),F=function(e){var a=e.friends.map((function(e){return(0,m.jsx)(R.OL,{to:"/dialogs/".concat(e.id),className:C,children:(0,m.jsx)(P,{id:e.id,name:e.name,photo:e.photo})},e.id)}));return(0,m.jsxs)("div",{className:z,children:[(0,m.jsx)("h2",{className:S,children:"Dialogs"}),(0,m.jsx)("div",{className:k,children:a})]})},B=function(e){(0,i.Z)(o,e);var a=(0,r.Z)(o);function o(){return(0,n.Z)(this,o),a.apply(this,arguments)}return(0,t.Z)(o,[{key:"componentDidMount",value:function(){this.props.requestDialogs(1,100,!0)}},{key:"render",value:function(){return(0,m.jsx)(F,(0,s.Z)({},this.props))}}]),o}(l.Component),I=(0,N.$j)((function(e){return{friends:e.dialogsPage.dialogsData}}),(function(e){return{requestDialogs:c.pY}}))(B),A=o(2919),w=o(9373),q=o(3787),L=function(e){var a=e.dialogsPage,o=e.sendMessageAC,s=e.userId,n=e.myPhoto,t=e.myName,i=e.isFetching,r=(0,l.useRef)(null);(0,l.useEffect)((function(){r.current&&(r.current.scrollTop=r.current.scrollHeight)}),[a.messageData[s]]);var c=[],u=a.messageData[s],_=a.dialogsData.find((function(e){return e.id===s}));u&&(c=u.map((function(e){return(0,m.jsx)(g,{id:e.id,message:e.message,isMy:e.isMy,user:_,myPhoto:n,myName:t},e.id)})));return(0,m.jsxs)("div",{style:{display:"flex",maxWidth:"100%"},children:[i?(0,m.jsx)("div",{className:"page",style:{flex:"1 1 auto",marginRight:"20px"},children:(0,m.jsx)(q.p,{})}):(0,m.jsx)("div",{className:d.dialogsPage,children:u?(0,m.jsxs)("div",{className:d.page__messages,children:[(0,m.jsxs)("div",{className:d.dialogsPage__info,children:[(0,m.jsx)(P,{id:s,photo:null===_||void 0===_?void 0:_.photo,name:null===_||void 0===_?void 0:_.name}),(0,m.jsx)(R.OL,{to:"/profile/".concat(s),className:d.friendLInk,children:(0,m.jsx)(w.Z,{className:d.toProfileBtn,onClick:function(){},endIcon:(0,m.jsx)(A.Z,{}),children:"Go to profile"})})]}),(0,m.jsx)("div",{className:d.messagesContainer,ref:r,children:c}),(0,m.jsx)(y,{onSubmit:function(e,a){o(e.message,s),a((0,Z.mc)("send-message"))}})]}):(0,m.jsx)("div",{className:d.dialogsPage__empty,children:"Select a dialog..."})}),(0,m.jsx)(I,{})]})},O=o(7781),T=o(5987),E=o(9271),J=["isAuth"],W=function(e){return{isAuth:e.auth.isAuth}};var H=function(e){return(0,N.$j)(W)((function(a){var o=a.isAuth,n=(0,T.Z)(a,J);return o?(0,m.jsx)(e,(0,s.Z)({},n)):(0,m.jsx)(E.l_,{to:"/login"})}))},U=o(4879),$=function(e){(0,i.Z)(o,e);var a=(0,r.Z)(o);function o(){return(0,n.Z)(this,o),a.apply(this,arguments)}return(0,t.Z)(o,[{key:"componentDidMount",value:function(){this.props.requestDialogs(1,100,!0)}},{key:"render",value:function(){var e=Number(this.props.match.params.userId);return(0,m.jsx)(L,(0,s.Z)((0,s.Z)({},this.props),{},{userId:e}))}}]),o}(l.Component),V={requestDialogs:c.pY,sendMessageAC:c.dI},X=(0,O.qC)(H,(0,N.$j)((function(e){return{dialogsPage:e.dialogsPage,myPhoto:e.auth.photo,myName:e.auth.name,isFetching:(0,U.ab)(e)}}),V),E.EN)($)},2919:function(e,a,o){var s=o(1941);a.Z=void 0;var n=s(o(5649)),t=o(184),i=(0,n.default)((0,t.jsx)("path",{d:"M16.01 11H4v2h12.01v3L20 12l-3.99-4z"}),"ArrowRightAlt");a.Z=i},1686:function(e,a,o){var s=o(1941);a.Z=void 0;var n=s(o(5649)),t=o(184),i=(0,n.default)((0,t.jsx)("path",{d:"M2.01 21 23 12 2.01 3 2 10l15 2-15 2z"}),"Send");a.Z=i},3400:function(e,a,o){o.d(a,{Z:function(){return y}});var s=o(4942),n=o(1048),t=o(2793),i=o(2791),r=o(8182),l=o(4419),c=o(2065),d=o(9578),u=o(1046),m=o(2173),g=o(4036),_=o(5878),p=o(1217);function h(e){return(0,p.Z)("MuiIconButton",e)}var v=(0,_.Z)("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),f=o(184),x=["edge","children","className","color","disabled","disableFocusRipple","size"],j=(0,d.ZP)(m.Z,{name:"MuiIconButton",slot:"Root",overridesResolver:function(e,a){var o=e.ownerState;return[a.root,"default"!==o.color&&a["color".concat((0,g.Z)(o.color))],o.edge&&a["edge".concat((0,g.Z)(o.edge))],a["size".concat((0,g.Z)(o.size))]]}})((function(e){var a=e.theme,o=e.ownerState;return(0,t.Z)({textAlign:"center",flex:"0 0 auto",fontSize:a.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:(a.vars||a).palette.action.active,transition:a.transitions.create("background-color",{duration:a.transitions.duration.shortest})},!o.disableRipple&&{"&:hover":{backgroundColor:a.vars?"rgba(".concat(a.vars.palette.action.activeChannel," / ").concat(a.vars.palette.action.hoverOpacity,")"):(0,c.Fq)(a.palette.action.active,a.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"start"===o.edge&&{marginLeft:"small"===o.size?-3:-12},"end"===o.edge&&{marginRight:"small"===o.size?-3:-12})}),(function(e){var a,o=e.theme,n=e.ownerState,i=null==(a=(o.vars||o).palette)?void 0:a[n.color];return(0,t.Z)({},"inherit"===n.color&&{color:"inherit"},"inherit"!==n.color&&"default"!==n.color&&(0,t.Z)({color:null==i?void 0:i.main},!n.disableRipple&&{"&:hover":(0,t.Z)({},i&&{backgroundColor:o.vars?"rgba(".concat(i.mainChannel," / ").concat(o.vars.palette.action.hoverOpacity,")"):(0,c.Fq)(i.main,o.palette.action.hoverOpacity)},{"@media (hover: none)":{backgroundColor:"transparent"}})}),"small"===n.size&&{padding:5,fontSize:o.typography.pxToRem(18)},"large"===n.size&&{padding:12,fontSize:o.typography.pxToRem(28)},(0,s.Z)({},"&.".concat(v.disabled),{backgroundColor:"transparent",color:(o.vars||o).palette.action.disabled}))})),y=i.forwardRef((function(e,a){var o=(0,u.Z)({props:e,name:"MuiIconButton"}),s=o.edge,i=void 0!==s&&s,c=o.children,d=o.className,m=o.color,_=void 0===m?"default":m,p=o.disabled,v=void 0!==p&&p,y=o.disableFocusRipple,Z=void 0!==y&&y,N=o.size,b=void 0===N?"medium":N,D=(0,n.Z)(o,x),M=(0,t.Z)({},o,{edge:i,color:_,disabled:v,disableFocusRipple:Z,size:b}),P=function(e){var a=e.classes,o=e.disabled,s=e.color,n=e.edge,t=e.size,i={root:["root",o&&"disabled","default"!==s&&"color".concat((0,g.Z)(s)),n&&"edge".concat((0,g.Z)(n)),"size".concat((0,g.Z)(t))]};return(0,l.Z)(i,h,a)}(M);return(0,f.jsx)(j,(0,t.Z)({className:(0,r.Z)(P.root,d),centerRipple:!0,focusRipple:!Z,disabled:v,ref:a,ownerState:M},D,{children:c}))}))}}]);
//# sourceMappingURL=544.16c2e8cf.chunk.js.map